(function(h){var c="nfel";var l=c+"-editor";var f=null;var g=function(t){var u=this;var p="";var q;var s;var w;var v;var r;this.init=function(){var z=h("body");var y=h(t.grid.getContainerNode());var B=y.data("descriptors");s=B[t.item.property];q=t.item[t.column.field];w=h("<div></div>").addClass("slickgrid-editor").css({"z-index":100000,position:"absolute","border-radius":"2px","box-shadow":"rgba(0, 0, 0, 0.247059) 0px 2px 5px","background-color":"rgb(255, 255, 255)",overflow:"hidden",padding:"10px 20px",cursor:"move"}).appendTo(z);r=h('<textarea hidefocus rows="5"/>').css({height:"80px",width:t.position.width+"px","min-width":"212px","margin-bottom":"5px","margin-top":"10px"}).tab().on("keydown",u.handleKeyDown).appendTo(w);w.draggable({cancel:".button, textarea, .nf-checkbox",containment:"parent"});var x=h('<div class="string-check-container">');x.appendTo(w);v=h('<div class="nf-checkbox string-check"/>').appendTo(x);h('<span class="string-check-label">&nbsp;Set empty string</span>').appendTo(x);var A=h('<div class="button">Ok</div>').css({color:"#fff",background:"#728E9B"}).hover(function(){h(this).css("background","#004849")},function(){h(this).css("background","#728E9B")}).on("click",u.save);var C=h('<div class="secondary-button">Cancel</div>').css({color:"#004849",background:"#E3E8EB"}).hover(function(){h(this).css("background","#C7D2D7")},function(){h(this).css("background","#E3E8EB")}).on("click",u.cancel);h("<div></div>").css({position:"relative",top:"10px",left:"20px",width:"212px",clear:"both","float":"right"}).append(A).append(C).append('<div class="clear"></div>').appendTo(w);u.position(t.position);r.focus().select()};this.handleKeyDown=function(x){if(x.which===h.ui.keyCode.ENTER&&!x.shiftKey){u.save()}else{if(x.which===h.ui.keyCode.ESCAPE){u.cancel();x.stopImmediatePropagation();x.preventDefault()}}};this.save=function(){t.commitChanges()};this.cancel=function(){r.val(p);t.cancelChanges()};this.hide=function(){w.hide()};this.show=function(){w.show()};this.position=function(x){w.css({top:x.top-27,left:x.left-20})};this.destroy=function(){w.remove()};this.focus=function(){r.focus()};this.loadValue=function(z){var A=false;var x=nf.Common.isSensitiveProperty(s);if(nf.Common.isDefinedAndNotNull(z[t.column.field])){if(x){p=nf.Common.config.sensitiveText}else{p=z[t.column.field];A=p===""}}var y=A?"checkbox-checked":"checkbox-unchecked";v.addClass(y);if(x){r.addClass("sensitive").keydown(function(){var B=h(this);if(B.hasClass("sensitive")){B.removeClass("sensitive");if(B.val()===nf.Common.config.sensitiveText){B.val("")}}})}r.val(p);r.select()};this.serializeValue=function(){if(r.val()===""){if(v.hasClass("checkbox-checked")){return""}else{if(nf.Common.isRequiredProperty(s)){if(nf.Common.isBlank(s.defaultValue)){return q}else{return s.defaultValue}}else{return null}}}else{if(r.hasClass("sensitive")){return q}else{return r.val()}}};this.applyValue=function(x,y){x[t.column.field]=y};this.isValueChanged=function(){return u.serializeValue()!==q};this.validate=function(){return{valid:true,msg:null}};this.init()};var i=function(s){var u=this;var p="";var q;var r;var v;var w;var t;this.init=function(){var x=h("body");var A=h(s.grid.getContainerNode());var E=A.data("descriptors");r=E[s.item.property];var C=nf.Common.isSensitiveProperty(r);q=s.item[s.column.field];var y="nfel";var B=y+"-editor";w=h("<div></div>").addClass("slickgrid-nfel-editor").css({"z-index":14000,position:"absolute",padding:"10px 20px",overflow:"hidden","border-radius":"2px","box-shadow":"rgba(0, 0, 0, 0.247059) 0px 2px 5px","background-color":"rgb(255, 255, 255)",cursor:"move"}).draggable({cancel:"input, textarea, pre, .nf-checkbox, .button, ."+B,containment:"parent"}).appendTo(x);t=h("<div></div>").addClass(B).appendTo(w).nfeditor({languageId:y,width:(s.position.width<212)?212:s.position.width,minWidth:212,minHeight:100,resizable:true,sensitive:C,escape:function(){u.cancel()},enter:function(){u.save()}});var z=h('<div class="string-check-container">');z.appendTo(w);v=h('<div class="nf-checkbox string-check"/>').appendTo(z);h('<span class="string-check-label">&nbsp;Set empty string</span>').appendTo(z);var D=h('<div class="button">Ok</div>').css({color:"#fff",background:"#728E9B"}).hover(function(){h(this).css("background","#004849")},function(){h(this).css("background","#728E9B")}).on("click",u.save);var F=h('<div class="secondary-button">Cancel</div>').css({color:"#004849",background:"#E3E8EB"}).hover(function(){h(this).css("background","#C7D2D7")},function(){h(this).css("background","#E3E8EB")}).on("click",u.cancel);h("<div></div>").css({position:"relative",top:"10px",left:"20px",width:"212px",clear:"both","float":"right"}).append(D).append(F).append('<div class="clear"></div>').appendTo(w);u.position(s.position);t.nfeditor("focus").nfeditor("selectAll")};this.save=function(){s.commitChanges()};this.cancel=function(){t.nfeditor("setValue",p);s.cancelChanges()};this.hide=function(){w.hide()};this.show=function(){w.show();t.nfeditor("refresh")};this.position=function(x){w.css({top:x.top-22,left:x.left-20})};this.destroy=function(){t.nfeditor("destroy");w.remove()};this.focus=function(){t.nfeditor("focus")};this.loadValue=function(z){var A=false;var x=nf.Common.isSensitiveProperty(r);if(nf.Common.isDefinedAndNotNull(z[s.column.field])){if(x){p=nf.Common.config.sensitiveText}else{p=z[s.column.field];A=p===""}}var y=A?"checkbox-checked":"checkbox-unchecked";v.addClass(y);t.nfeditor("setValue",p).nfeditor("selectAll")};this.serializeValue=function(){var x=t.nfeditor("getValue");if(x===""){if(v.hasClass("checkbox-checked")){return""}else{if(nf.Common.isRequiredProperty(r)){if(nf.Common.isBlank(r.defaultValue)){return q}else{return r.defaultValue}}else{return null}}}else{if(t.nfeditor("isModified")===false){return q}else{return x}}};this.applyValue=function(x,y){x[s.column.field]=y};this.isValueChanged=function(){return u.serializeValue()!==q};this.validate=function(){return{valid:true,msg:null}};this.init()};var b=function(r){var s=this;var p=null;var u;var t;var q;this.init=function(){var w=h("body");var y=h(r.grid.getContainerNode());var D=y.data("descriptors");q=D[r.item.property];var F=y.closest(".property-container");var A=F.data("options");u=h('<div class="combo-editor"></div>').css({"z-index":1999,position:"absolute",padding:"10px 20px",overflow:"hidden","border-radius":"2px","box-shadow":"rgba(0, 0, 0, 0.247059) 0px 2px 5px","background-color":"rgb(255, 255, 255)",cursor:"move"}).draggable({cancel:".button, .combo",containment:"parent"}).appendTo(w);var x=nf.Common.getAllowableValues(q);var G=[];if(q.required===false){G.push({text:"No value",value:null,optionClass:"unset"})}if(h.isArray(x)){h.each(x,function(I,J){var H=J.allowableValue;G.push({text:H.displayName,value:H.value,disabled:J.canRead===false&&H.value!==r.item.previousValue,description:nf.Common.escapeHtml(H.description)})})}if(G.length===0){G.push({text:"No value",value:null,optionClass:"unset",disabled:true})}if(nf.Common.isDefinedAndNotNull(q.identifiesControllerService)){G.push({text:"Create new service...",value:undefined,optionClass:"unset"})}var z=r.position;var v=h(window).height();var C=v-z.bottom-16;t=h('<div class="value-combo combo"></div>').combo({options:G,maxHeight:C,select:function(H){if(typeof H.value==="undefined"){s.cancel();o(y,r.grid,r.item,q.identifiesControllerService,A)}}}).css({"margin-top":"10px","margin-bottom":"10px",width:((z.width-16)<212)?212:(z.width-16)+"px"}).appendTo(u);var E=h('<div class="secondary-button">Cancel</div>').css({color:"#004849",background:"#E3E8EB"}).hover(function(){h(this).css("background","#C7D2D7")},function(){h(this).css("background","#E3E8EB")}).on("click",s.cancel);var B=h('<div class="button">Ok</div>').css({color:"#fff",background:"#728E9B"}).hover(function(){h(this).css("background","#004849")},function(){h(this).css("background","#728E9B")}).on("click",s.save);h("<div></div>").css({position:"relative",top:"10px",left:"20px",width:"212px",clear:"both","float":"right"}).append(B).append(E).appendTo(u);s.position(z)};this.save=function(){r.commitChanges()};this.cancel=function(){r.cancelChanges()};this.hide=function(){u.hide()};this.show=function(){u.show()};this.position=function(v){u.css({top:v.top-24,left:v.left-20})};this.destroy=function(){t.combo("destroy");u.remove()};this.focus=function(){};this.loadValue=function(v){if(!nf.Common.isUndefined(v.value)){p=v.value;t.combo("setSelectedOption",{value:v.value})}else{if(nf.Common.isDefinedAndNotNull(q.defaultValue)){p=q.defaultValue;t.combo("setSelectedOption",{value:q.defaultValue})}}};this.serializeValue=function(){var v=t.combo("getSelectedOption");return v.value};this.applyValue=function(v,w){v[r.column.field]=w};this.isValueChanged=function(){var v=t.combo("getSelectedOption");return(!(v.value===""&&p===null))&&(v.value!==p)};this.validate=function(){return{valid:true,msg:null}};this.init()};var m=function(E,I,w,p){nf.UniversalCapture.removeAllPropertyDetailDialogs();var D=E.getData();var x=D.getItem(w);if(nf.Common.isDefinedAndNotNull(x.value)){var y=I[x.property];if(!nf.Common.isSensitiveProperty(y)){var t=h(E.getCellNode(w,p));var u=t.offset();var v=h('<div class="property-detail"></div>').css({"z-index":1999,position:"absolute",padding:"5px",overflow:"hidden","border-radius":"2px","box-shadow":"rgba(0, 0, 0, 0.247059) 0px 2px 5px","background-color":"rgb(255, 255, 255)",cursor:"move",top:u.top-5,left:u.left-5}).appendTo("body");var q=nf.Common.getAllowableValues(y);if(h.isArray(q)){v.draggable({cancel:".button, .combo",containment:"parent"});var r=[];h.each(q,function(K,L){var J=L.allowableValue;r.push({text:J.displayName,value:J.value,description:nf.Common.escapeHtml(J.description),disabled:true})});if(r.length===0){r.push({text:"No value",value:null,optionClass:"unset",disabled:true})}var A=h(window).height();var F=A-(u.top+t.height())-16;var G=t.width()-16;h('<div class="value-combo combo"></div>').width(G).combo({options:r,maxHeight:F,selectedOption:{value:x.value}}).appendTo(v);h('<div class="button">Ok</div>').css({margin:"0 0 0 5px","float":"left",color:"#fff",background:"#728E9B"}).hover(function(){h(this).css("background","#004849")},function(){h(this).css("background","#728E9B")}).on("click",function(){v.hide().remove()}).appendTo(v)}else{var s=null;if(nf.Common.supportsEl(y)){var H="nfel";var z=H+"-editor";v.draggable({cancel:"input, textarea, pre, .button, ."+z,containment:"parent"});s=h("<div></div>").addClass(z).appendTo(v).nfeditor({languageId:H,width:t.width(),content:x.value,minWidth:175,minHeight:100,readOnly:true,resizable:true,escape:function(){C()}})}else{h('<textarea hidefocus rows="5" readonly="readonly"/>').css({height:"80px",width:t.width()+"px",margin:"20px 20px"}).text(x.value).on("keydown",function(J){if(J.which===h.ui.keyCode.ESCAPE){C();J.stopImmediatePropagation();J.preventDefault()}}).appendTo(v);v.draggable({containment:"parent"})}var C=function(){if(s!==null){s.nfeditor("destroy")}v.hide().remove()};var B=h('<div class="button">Ok</div>').css({margin:"0 0 0 5px","float":"left",color:"#fff",background:"#728E9B"}).hover(function(){h(this).css("background","#004849")},function(){h(this).css("background","#728E9B")}).on("click",function(){C()});h("<div></div>").append(B).append('<div class="clear"></div>').appendTo(v)}}}};var o=function(p,q,r,s,t){h.ajax({type:"GET",url:"../nifi-api/flow/controller-service-types",data:{serviceType:s},dataType:"json"}).done(function(w){var C=[];h.each(w.controllerServiceTypes,function(D,E){C.push({text:nf.Common.substringAfterLast(E.type,"."),value:E.type,description:nf.Common.escapeHtml(E.description)})});if(C.length===0){nf.Dialog.showOkDialog({headerText:"Controller Service",dialogContent:"No controller service types found that are applicable for this property."})}else{var v='<div id="new-inline-controller-service-dialog" class="hidden dialog medium-dialog cancellable"><div class="dialog-content"><div><div class="setting-name">Controller Service</div><div class="setting-field"><div class="new-inline-controller-service-combo"></div></div></div><div><div class="setting-name">Tags</div><div class="setting-field"><div class="new-inline-controller-service-tags"></div></div></div><div><div class="setting-name">Description</div><div class="setting-field"><div class="new-inline-controller-service-description"></div></div></div></div></div>';var B=h(v).appendTo(t.dialogContainer);var x=B.find("div.new-inline-controller-service-combo");var z=B.find("div.new-inline-controller-service-tags");var u=B.find("div.new-inline-controller-service-description");x.combo({options:C,select:function(E){var D;h.each(w.controllerServiceTypes,function(F,G){if(G.type===E.value){D=G;return false}});z.text(D.tags.join(", ")).ellipsis();u.text(D.description)}});B.modal({headerText:"Add Controller Service",scrollableContentStyle:"scrollable",buttons:[{buttonText:"Create",color:{base:"#728E9B",hover:"#004849",text:"#ffffff"},handler:{click:function(){y()}}},{buttonText:"Cancel",color:{base:"#E3E8EB",hover:"#C7D2D7",text:"#004849"},handler:{click:function(){A()}}}]});var y=function(){var E=x.combo("getSelectedOption").value;var D={revision:nf.Client.getRevision({revision:{version:0,}}),component:{type:E}};var F="../nifi-api/controller/controller-services";if(nf.Common.isDefinedAndNotNull(f)){F="../nifi-api/process-groups/"+encodeURIComponent(f)+"/controller-services"}h.ajax({type:"POST",url:F,data:JSON.stringify(D),dataType:"json",contentType:"application/json"}).done(function(G){t.descriptorDeferred(r.property).done(function(K){var J=K.propertyDescriptor;var H=p.data("descriptors");if(!nf.Common.isUndefined(H)){H[J.name]=J}var I=q.getData();I.updateItem(r.id,h.extend(r,{value:G.component.id}));B.modal("hide")})}).fail(nf.Common.handleAjaxError)};var A=function(){B.modal("hide")};B.modal("show")}}).fail(nf.Common.handleAjaxError)};var n=function(x,y){var u=function(I,G,F,C,A){var E=30;var z=h("<div></div>");var B=h("<span/>").addClass("table-cell").text(F).appendTo(z);if(A.type==="required"){B.addClass("required")}var H=x.data("descriptors");var D=H[A.property];if(nf.Common.isDefinedAndNotNull(D)){if(!nf.Common.isBlank(D.description)||!nf.Common.isBlank(D.defaultValue)||!nf.Common.isBlank(D.supportsEl)){h('<div class="fa fa-question-circle" alt="Info" style="float: right; margin-right: 6px; margin-top: 4px;"></div>').appendTo(z);h('<span class="hidden property-descriptor-name"></span>').text(A.property).appendTo(z);E=46}}B.width(C.width-E).ellipsis();return z.html()};var v=function(I,G,F,B,z){var E;if(nf.Common.isDefinedAndNotNull(F)){var H=x.data("descriptors");var D=H[z.property];if(nf.Common.isSensitiveProperty(D)){E='<span class="table-cell sensitive">Sensitive value set</span>'}else{var A=nf.Common.getAllowableValues(D);if(h.isArray(A)){h.each(A,function(J,L){var K=L.allowableValue;if(F===K.value){F=K.displayName;return false}})}if(F===""){E='<span class="table-cell blank">Empty string set</span>'}else{E='<div class="table-cell value"><pre class="ellipsis">'+nf.Common.escapeHtml(F)+"</pre></div>"}}}else{E='<span class="unset">No value set</span>'}var C=h(E);if(z.type==="required"){C.addClass("required")}C.find(".ellipsis").width(B.width-10).ellipsis();return h("<div/>").append(C).html()};var p=[{id:"property",field:"displayName",name:"Property",sortable:false,resizable:true,rerenderOnResize:true,formatter:u},{id:"value",field:"value",name:"Value",sortable:false,resizable:true,cssClass:"pointer",rerenderOnResize:true,formatter:v}];var t=function(J,G,F,C,B){var I="";var H=x.data("descriptors");var D=H[B.property];var A=nf.Common.isDefinedAndNotNull(D.identifiesControllerService);var z=nf.Common.isDefinedAndNotNull(B.value);var E=nf.Common.isDefinedAndNotNull(nf.Canvas);if(A&&z&&E){h.each(D.allowableValues,function(K,M){var L=M.allowableValue;if(L.value===B.value){I+='<div class="pointer go-to-service fa fa-long-arrow-right" title="Go To" style="margin-top: 2px" ></div>';return false}})}if(y.readOnly!==true&&B.type==="userDefined"){I+='<div title="Delete" class="delete-property pointer fa fa-trash" style="margin-top: 2px" ></div>'}return I};p.push({id:"actions",name:"&nbsp;",minWidth:20,width:20,formatter:t});var q={forceFitColumns:true,enableTextSelectionOnCells:true,enableCellNavigation:true,enableColumnReorder:false,editable:y.readOnly!==true,enableAddRow:false,autoEdit:false,rowHeight:24};var w=new Slick.Data.DataView({inlineFilters:false});w.setItems([]);w.setFilterArgs({searchString:"",property:"hidden"});w.setFilter(a);w.getItemMetadata=function(A){var C=w.getItem(A);var B=x.data("descriptors");var z=B[C.property];if(nf.Common.isUndefinedOrNull(z)||nf.Common.supportsEl(z)){return{columns:{value:{editor:i}}}}else{var D=nf.Common.getAllowableValues(z);if(h.isArray(D)){return{columns:{value:{editor:b}}}}else{return{columns:{value:{editor:g}}}}}};var s=function(z){h.ajax({type:"GET",url:"../nifi-api/controller-services/"+encodeURIComponent(z.value),dataType:"json"}).done(function(A){var C=x.closest(".dialog");if(C.hasClass("modal")){C.modal("hide")}else{C.hide()}var B=A.component;h.Deferred(function(D){if(nf.Common.isDefinedAndNotNull(B.parentGroupId)){if(h("#process-group-configuration").is(":visible")){nf.ProcessGroupConfiguration.loadConfiguration(B.parentGroupId).done(function(){D.resolve()})}else{nf.ProcessGroupConfiguration.showConfiguration(B.parentGroupId).done(function(){D.resolve()})}}else{if(h("#settings").is(":visible")){nf.Settings.loadSettings().done(function(){D.resolve()})}else{nf.Settings.showSettings().done(function(){D.resolve()})}}}).done(function(){if(nf.Common.isDefinedAndNotNull(B.parentGroupId)){nf.ProcessGroupConfiguration.selectControllerService(z.value)}else{nf.Settings.selectControllerService(z.value)}})}).fail(nf.Common.handleAjaxError)};var r=new Slick.Grid(x,w,p,q);r.setSelectionModel(new Slick.RowSelectionModel());r.onClick.subscribe(function(D,z){if(r.getColumns()[z.cell].id==="value"){if(y.readOnly===true){var A=x.data("descriptors");m(r,A,z.row,z.cell)}else{r.gotoCell(z.row,z.cell,true)}D.stopImmediatePropagation()}else{if(r.getColumns()[z.cell].id==="actions"){var B=w.getItem(z.row);var C=h(D.target);if(C.hasClass("delete-property")){w.updateItem(B.id,h.extend(B,{hidden:true}));D.stopImmediatePropagation()}else{if(C.hasClass("go-to-service")){if(y.readOnly===true){s(B)}else{if(typeof y.goToServiceDeferred==="function"){y.goToServiceDeferred().done(function(){s(B)})}}}}}}});r.onKeyDown.subscribe(function(A,z){if(A.which===h.ui.keyCode.ESCAPE){var B=r.getEditorLock();if(B.isActive()){B.cancelCurrentEdit();A.stopImmediatePropagation();A.preventDefault()}}});w.onRowCountChanged.subscribe(function(A,z){r.updateRowCount();r.render()});w.onRowsChanged.subscribe(function(A,z){r.invalidateRows(z.rows);r.render()});x.data("gridInstance",r).on("mouseenter","div.slick-cell",function(G){var A=h(this).find("div.fa-question-circle");if(A.length&&!A.data("qtip")){var E=h(this).find("span.property-descriptor-name").text();var B=x.data("descriptors");var z=B[E];var F=x.data("history");var C=F[E];var D=nf.Common.formatPropertyTooltip(z,C);if(nf.Common.isDefinedAndNotNull(D)){A.qtip(h.extend({},nf.Common.config.tooltipConfig,{content:D}))}}})};var k=function(r){var q=r.data("gridInstance");if(nf.Common.isDefinedAndNotNull(q)){var p=q.getEditController();p.commitCurrentEdit()}};var a=function(q,p){return q.hidden===false};var e=function(u,r,s,v){u.data({descriptors:s,history:v});var p=u.data("gridInstance");var t=p.getData();if(nf.Common.isDefinedAndNotNull(r)){t.beginUpdate();var q=0;h.each(r,function(x,z){var A=s[x];var y="userDefined";var w=x;if(nf.Common.isDefinedAndNotNull(A)){if(nf.Common.isRequiredProperty(A)){y="required"}else{if(nf.Common.isDynamicProperty(A)){y="userDefined"}else{y="optional"}}w=A.displayName;if(nf.Common.isNull(z)&&nf.Common.isDefinedAndNotNull(A.defaultValue)){z=A.defaultValue}}t.addItem({id:q++,hidden:false,property:x,displayName:w,previousValue:z,value:z,type:y})});t.endUpdate()}};var j=function(t){var q=t.data("options");if(q.readOnly===true){nf.UniversalCapture.removeAllPropertyDetailDialogs()}else{if(nf.Common.isDefinedAndNotNull(q.dialogContainer)){h("#new-property-dialog").modal("hide")}}var s=t.find("div.property-table");s.removeData("descriptors history");nf.Common.cleanUpTooltips(s,"div.fa-question-circle");var p=s.data("gridInstance");var r=p.getData();r.setItems([])};var d={init:function(p){return this.each(function(){if(nf.Common.isDefinedAndNotNull(p)){var u=h(this);u.empty().unbind().addClass("property-container").data("options",p);var t=h('<div class="properties-header"></div>').appendTo(u);h('<div class="required-property-note">Required field</div>').appendTo(t);var x=h('<div class="property-table"></div>').appendTo(u);if(p.readOnly!==true&&nf.Common.isDefinedAndNotNull(p.dialogContainer)){var r='<div id="new-property-dialog" class="dialog cancellable small-dialog hidden"><div class="dialog-content"><div><div class="setting-name">Property name</div><div class="setting-field new-property-name-container"><input class="new-property-name" type="text"/></div></div></div></div>';var q=h(r).appendTo(p.dialogContainer);var s=q.find("input.new-property-name");q.modal({headerText:"Add Property",scrollableContentStyle:"scrollable",buttons:[{buttonText:"Ok",color:{base:"#728E9B",hover:"#004849",text:"#ffffff"},handler:{click:function(){w()}}},{buttonText:"Cancel",color:{base:"#E3E8EB",hover:"#C7D2D7",text:"#004849"},handler:{click:function(){y()}}}]});var w=function(){var z=h.trim(s.val());if(z!==""){var A=x.data("gridInstance");var C=A.getData();var B=null;h.each(C.getItems(),function(E,F){if(z===F.property){B=F;return false}});if(B===null){p.descriptorDeferred(z).done(function(E){var G=E.propertyDescriptor;var F=x.data("descriptors");if(!nf.Common.isUndefined(F)){F[G.name]=G}var I=C.getLength();C.addItem({id:I,hidden:false,property:z,displayName:z,previousValue:null,value:null,type:"userDefined"});var H=C.getRowById(I);A.setActiveCell(H,A.getColumnIndex("value"));A.editActiveCell()})}else{if(B.hidden===true){C.updateItem(B.id,h.extend(B,{hidden:false,previousValue:null,value:null}));var D=C.getRowById(B.id);A.setActiveCell(D,A.getColumnIndex("value"));A.editActiveCell()}else{nf.Dialog.showOkDialog({headerText:"Property Exists",dialogContent:"A property with this name already exists."});var D=C.getRowById(B.id);A.setSelectedRows([D]);A.scrollRowIntoView(D)}}}else{nf.Dialog.showOkDialog({headerText:"Property Name",dialogContent:"Property name must be specified."})}q.modal("hide")};var y=function(){q.modal("hide")};s.on("keydown",function(A){var z=A.keyCode?A.keyCode:A.which;if(z===h.ui.keyCode.ENTER){w();A.stopImmediatePropagation();A.preventDefault()}});q.draggable({cancel:"input, textarea, pre, .button, ."+l,containment:"body"}).on("click","div.new-property-ok",w).on("click","div.new-property-cancel",y);var v=h('<div class="add-property"></div>').appendTo(t);h('<button class="button fa fa-plus"></button>').on("click",function(){k(x);s.val("");q.modal("show");s.focus()}).appendTo(v)}h('<div class="clear"></div>').appendTo(t);n(x,p)}})},loadProperties:function(p,q,r){return this.each(function(){var s=h(this).find("div.property-table");e(s,p,q,r)})},saveRow:function(){return this.each(function(){var p=h(this).find("div.property-table");k(p)})},resetTableSize:function(){return this.each(function(){var q=h(this).find("div.property-table");var p=q.data("gridInstance");if(nf.Common.isDefinedAndNotNull(p)){p.resizeCanvas()}})},cancelEdit:function(){return this.each(function(){var r=h(this).find("div.property-table");var q=r.data("gridInstance");if(nf.Common.isDefinedAndNotNull(q)){var p=q.getEditController();p.cancelCurrentEdit()}})},destroy:function(){return this.each(function(){var q=h(this);var p=q.data("options");if(nf.Common.isDefinedAndNotNull(p)){j(q);if(nf.Common.isDefinedAndNotNull(p.dialogContainer)){h("#new-property-dialog").modal("hide");h(p.dialogContainer).children("div.new-inline-controller-service-dialog").remove()}}})},clear:function(){return this.each(function(){j(h(this))})},isSaveRequired:function(){var p=false;this.each(function(){var s=h(this).find("div.property-table");var q=s.data("gridInstance");var r=q.getData();h.each(r.getItems(),function(){if(this.value!==this.previousValue){p=true;return false}});return false});return p},marshalProperties:function(){var p={};this.each(function(){var s=h(this).find("div.property-table");var q=s.data("gridInstance");var r=q.getData();h.each(r.getItems(),function(){if(this.hidden===true){p[this.property]=null}else{if(this.value!==this.previousValue){p[this.property]=this.value}}});return false});return p},setGroupId:function(p){return this.each(function(){f=p})}};h.fn.propertytable=function(p){if(d[p]){return d[p].apply(this,Array.prototype.slice.call(arguments,1))}else{return d.init.apply(this,arguments)}}})(jQuery);